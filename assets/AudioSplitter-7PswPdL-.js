import{b as _,u as H,j as e}from"./index-CjcMs8T3.js";import{r as n}from"./vendor-CX2mysxk.js";import{B as d}from"./button-7J-vtqLr.js";import{I as O}from"./input-Sl65HlNB.js";import{C as N,a as v,b,c as T,d as w}from"./card-D2uq1LWq.js";import{A as W}from"./arrow-left-Cqdtw2X2.js";import{S as u}from"./scissors-TEXBaevH.js";import{P as q}from"./pause-ozMzQm9i.js";import{P as G}from"./play-CbDzydzd.js";import{P as J,T as K}from"./trash-2-BFYXG91P.js";import{D as k}from"./download-1AJ-PecF.js";const re=()=>{const[i,$]=n.useState(null),[o,j]=n.useState([]),[x,p]=n.useState(!1),[c,y]=n.useState(0),[f,A]=n.useState(0),[S,g]=n.useState(!1),[h,C]=n.useState([]),l=n.useRef(null),{toast:r}=_(),R=H(),D=t=>{var a;const s=(a=t.target.files)==null?void 0:a[0];s&&s.type.startsWith("audio/")?($(s),j([]),C([]),p(!1),y(0)):r({title:"שגיאה",description:"אנא בחר קובץ אודיו תקין"})},L=()=>{l.current&&(x?l.current.pause():l.current.play(),p(!x))},E=()=>{c>0&&c<f&&(j(t=>[...t,c].sort((s,a)=>s-a)),r({title:"נקודת חיתוך נוספה",description:`נקודה ב-${m(c)}`}))},F=t=>{j(s=>s.filter((a,B)=>B!==t))},M=async()=>{if(!i){r({title:"שגיאה",description:"אנא בחר קובץ אודיו קודם"});return}if(o.length===0){r({title:"שגיאה",description:"אנא הוסף לפחות נקודת חיתוך אחת"});return}g(!0),r({title:"מעבד...",description:"חותך את קובץ האודיו"});try{await new Promise(s=>setTimeout(s,3e3));const t=new FileReader;t.onload=()=>{const s=t.result,a=Array(o.length+1).fill(s);C(a),g(!1),r({title:"הושלם!",description:`הקובץ חולק ל-${a.length} חלקים`})},t.readAsDataURL(i)}catch{g(!1),r({title:"שגיאה",description:"שגיאה בחיתוך הקובץ"})}},P=(t,s)=>{const a=document.createElement("a");a.href=t,a.download=`segment_${s+1}_${i==null?void 0:i.name}`,a.click(),r({title:"הורד בהצלחה!",description:`חלק ${s+1} נשמר`})},U=()=>{h.forEach((t,s)=>{setTimeout(()=>P(t,s),s*500)})},m=t=>{const s=Math.floor(t/60),a=Math.floor(t%60);return`${s}:${a.toString().padStart(2,"0")}`},z=()=>{l.current&&y(l.current.currentTime)},I=()=>{l.current&&A(l.current.duration)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs(d,{onClick:()=>R("/categories/audio-tools"),variant:"outline",className:"mb-4",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"חזרה לכלי אודיו"]}),e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx(u,{className:"h-12 w-12 mx-auto mb-4 text-indigo-600"}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"מחלק אודיו"}),e.jsx("p",{className:"text-gray-600",children:"חלק קובץ אודיו למספר חלקים"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsx(b,{children:"קובץ אודיו"}),e.jsx(T,{children:"העלה קובץ אודיו לחלוקה"})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsx(O,{type:"file",accept:"audio/*",onChange:D,className:"cursor-pointer"}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded border",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"h-4 w-4 mr-2 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium",children:i.name})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(i.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("audio",{ref:l,src:URL.createObjectURL(i),onTimeUpdate:z,onLoadedMetadata:I,onEnded:()=>p(!1)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{onClick:L,size:"sm",children:[x?e.jsx(q,{className:"h-4 w-4 mr-1"}):e.jsx(G,{className:"h-4 w-4 mr-1"}),x?"עצור":"נגן"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[m(c)," / ",m(f)]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-100",style:{width:`${c/f*100}%`}})})]}),e.jsxs(d,{onClick:E,variant:"outline",className:"w-full",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"הוסף נקודת חיתוך ב-",m(c)]}),o.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"נקודות חיתוך:"}),o.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"text-sm",children:m(t)}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>F(s),children:e.jsx(K,{className:"h-4 w-4 text-red-500"})})]},s))]}),e.jsxs(d,{onClick:M,disabled:o.length===0||S,className:"w-full",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),S?"חותך...":`חתוך ל-${o.length+1} חלקים`]})]})]})]}),e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsx(b,{children:"חלקים"}),e.jsx(T,{children:"הורד את החלקים שנוצרו"})]}),e.jsx(w,{children:h.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["✓ חלוקה הושלמה! נוצרו ",h.length," חלקים"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:h.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded border",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium",children:["חלק ",s+1]})]}),e.jsx(d,{size:"sm",onClick:()=>P(t,s),children:"הורד"})]},s))}),e.jsxs(d,{onClick:U,variant:"outline",className:"w-full",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"הורד את כל החלקים"]})]}):e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-400 border border-dashed rounded",children:[e.jsx(u,{className:"h-12 w-12 mb-2"}),e.jsx("div",{children:"חלקי הקובץ יופיעו כאן"})]})})]})]}),e.jsxs(N,{className:"mt-6",children:[e.jsx(v,{children:e.jsx(b,{children:"הוראות שימוש"})}),e.jsx(w,{children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded",children:[e.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"1. העלה קובץ"}),e.jsx("div",{className:"text-blue-700",children:"בחר קובץ אודיו לחלוקה"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded",children:[e.jsx("div",{className:"font-medium text-green-800 mb-1",children:"2. נגן והאזן"}),e.jsx("div",{className:"text-green-700",children:"מצא נקודות לחיתוך"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded",children:[e.jsx("div",{className:"font-medium text-purple-800 mb-1",children:"3. הוסף נקודות"}),e.jsx("div",{className:"text-purple-700",children:"לחץ להוספת נקודות חיתוך"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 rounded",children:[e.jsx("div",{className:"font-medium text-orange-800 mb-1",children:"4. חתוך והורד"}),e.jsx("div",{className:"text-orange-700",children:"חתוך והורד את החלקים"})]})]})})]})]})})};export{re as default};
