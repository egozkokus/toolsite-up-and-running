import{b as D,u as M,j as e}from"./index-CjcMs8T3.js";import{r as o}from"./vendor-CX2mysxk.js";import{B as d}from"./button-7J-vtqLr.js";import{I as u}from"./input-Sl65HlNB.js";import{C as j,a as f,b as N,c as w,d as C}from"./card-D2uq1LWq.js";import{A as U}from"./arrow-left-Cqdtw2X2.js";import{I as E}from"./image-DAOeizdb.js";import{U as F}from"./upload-eVVNaMx6.js";import{D as L}from"./download-1AJ-PecF.js";const K=()=>{const[r,v]=o.useState(null),[i,x]=o.useState(""),[c,b]=o.useState(80),[n,y]=o.useState(0),[m,h]=o.useState(0),{toast:p}=D(),I=M(),S=s=>{var t;const a=(t=s.target.files)==null?void 0:t[0];a&&a.type.startsWith("image/")?(v(a),y(a.size),x(""),h(0)):p({title:"Error",description:"Please select a valid image file"})},k=()=>{if(!r)return;const s=document.createElement("canvas"),a=s.getContext("2d"),t=new window.Image;t.onload=()=>{s.width=t.width,s.height=t.height,a==null||a.drawImage(t,0,0);const l=s.toDataURL("image/jpeg",c/100);x(l);const z=Math.round(l.length*3/4);h(z),p({title:"Success!",description:"Image compressed successfully"})},t.src=URL.createObjectURL(r)},B=()=>{if(i){const s=document.createElement("a");s.href=i,s.download=`compressed_${(r==null?void 0:r.name)||"image.jpg"}`,s.click()}},g=s=>{if(s===0)return"0 Bytes";const a=1024,t=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,l)).toFixed(2))+" "+t[l]};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs(d,{onClick:()=>I("/categories/image-tools"),variant:"outline",className:"mb-4",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Back to Image Tools"]}),e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-4 text-purple-600"}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Image Compressor"}),e.jsx("p",{className:"text-gray-600",children:"Compress images without losing quality"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Upload & Settings"}),e.jsx(w,{children:"Select an image and adjust compression quality"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Image"}),e.jsx(u,{type:"file",accept:"image/*",onChange:S,className:"cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Quality: ",c,"%"]}),e.jsx(u,{type:"range",min:"10",max:"100",value:c,onChange:s=>b(Number(s.target.value)),className:"w-full"})]}),r&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Original:"})," ",g(n)]}),m>0&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Compressed:"})," ",g(m),e.jsxs("span",{className:"text-green-600 ml-2",children:["(",Math.round((n-m)/n*100),"% smaller)"]})]})]}),e.jsxs(d,{onClick:k,disabled:!r,className:"w-full",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Compress Image"]})]})]}),e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Preview & Download"}),e.jsx(w,{children:"Preview compressed image and download"})]}),e.jsx(C,{className:"space-y-4",children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:i,alt:"Compressed",className:"max-w-full h-auto border rounded"}),e.jsxs(d,{onClick:B,className:"w-full",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Download Compressed Image"]})]}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 border border-dashed rounded",children:"Compressed image will appear here"})})]})]})]})})};export{K as default};
