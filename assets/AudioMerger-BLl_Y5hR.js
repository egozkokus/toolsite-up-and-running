import{b as B,u as z,j as e}from"./index-CjcMs8T3.js";import{r as m}from"./vendor-CX2mysxk.js";import{B as n}from"./button-7J-vtqLr.js";import{I as T}from"./input-Sl65HlNB.js";import{C as x,a as h,b as u,c as v,d as j}from"./card-D2uq1LWq.js";import{A as D}from"./arrow-left-Cqdtw2X2.js";import{M as g}from"./music-BNKZSFZY.js";import{T as S,P as I}from"./trash-2-BFYXG91P.js";import{D as b}from"./download-1AJ-PecF.js";const W=()=>{const[a,c]=m.useState([]),[p,d]=m.useState(!1),[o,N]=m.useState(null),{toast:i}=B(),w=z(),y=s=>{const t=Array.from(s.target.files||[]),r=t.filter(l=>l.type.startsWith("audio/"));r.length!==t.length&&i({title:"אזהרה",description:"חלק מהקבצים לא הם קבצי אודיו ולא נוספו"}),c(l=>[...l,...r]),N(null)},F=s=>{c(t=>t.filter((r,l)=>l!==s))},f=(s,t)=>{if(t==="up"&&s===0||t==="down"&&s===a.length-1)return;const r=[...a],l=t==="up"?s-1:s+1;[r[s],r[l]]=[r[l],r[s]],c(r)},C=async()=>{if(a.length<2){i({title:"שגיאה",description:"נדרשים לפחות 2 קבצי אודיו למיזוג"});return}d(!0),i({title:"מעבד...",description:"מאחד את קבצי האודיו"});try{await new Promise(t=>setTimeout(t,3e3));const s=new FileReader;s.onload=()=>{N(s.result),d(!1),i({title:"הושלם!",description:`${a.length} קבצי אודיו אוחדו בהצלחה`})},s.readAsDataURL(a[0])}catch{d(!1),i({title:"שגיאה",description:"שגיאה במיזוג הקבצים"})}},M=()=>{if(o){const s=document.createElement("a");s.href=o,s.download="merged_audio.mp3",s.click(),i({title:"הורד בהצלחה!",description:"הקובץ המאוחד נשמר"})}},k=()=>a.length*3.5,A=s=>{if(s===0)return"0 B";const t=1024,r=["B","KB","MB","GB"],l=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,l)).toFixed(2))+" "+r[l]};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs(n,{onClick:()=>w("/categories/audio-tools"),variant:"outline",className:"mb-4",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"חזרה לכלי אודיו"]}),e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx(g,{className:"h-12 w-12 mx-auto mb-4 text-purple-600"}),e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"מאחד אודיו"}),e.jsx("p",{className:"text-gray-600",children:"אחד מספר קבצי אודיו לקובץ אחד"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"קבצי אודיו"}),e.jsx(v,{children:"העלה קבצי אודיו לאיחוד"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsx(T,{type:"file",accept:"audio/*",multiple:!0,onChange:y,className:"cursor-pointer"}),a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:["קבצים נבחרים (",a.length,"):"]}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:a.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx(g,{className:"h-4 w-4 mr-2 text-gray-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:A(s.size)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>f(t,"up"),disabled:t===0,children:"↑"}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>f(t,"down"),disabled:t===a.length-1,children:"↓"}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>F(t),children:e.jsx(S,{className:"h-4 w-4 text-red-500"})})]})]},t))}),e.jsx("div",{className:"p-3 bg-blue-50 rounded",children:e.jsxs("div",{className:"text-sm text-blue-800",children:["סך הכל: ",a.length," קבצים | משך כולל משוער: ",k().toFixed(1)," דקות"]})})]}),e.jsxs(n,{onClick:C,disabled:a.length<2||p,className:"w-full",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),p?"מאחד...":"אחד קבצים"]})]})]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"קובץ מאוחד"}),e.jsx(v,{children:"הורד את הקובץ המאוחד"})]}),e.jsx(j,{children:o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded border border-green-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"merged_audio.mp3"})]}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"✓ איחוד הושלם בהצלחה"})]}),e.jsxs(n,{onClick:M,className:"w-full",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"הורד קובץ מאוחד"]})]}):e.jsxs("div",{className:"h-40 flex flex-col items-center justify-center text-gray-400 border border-dashed rounded",children:[e.jsx(g,{className:"h-8 w-8 mb-2"}),e.jsx("div",{className:"text-sm",children:"הקובץ המאוחד יופיע כאן"})]})})]})]}),e.jsxs(x,{className:"mt-6",children:[e.jsx(h,{children:e.jsx(u,{children:"הוראות שימוש"})}),e.jsx(j,{children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded",children:[e.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"1. העלה קבצים"}),e.jsx("div",{className:"text-blue-700",children:"בחר מספר קבצי אודיו"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded",children:[e.jsx("div",{className:"font-medium text-green-800 mb-1",children:"2. סדר מחדש"}),e.jsx("div",{className:"text-green-700",children:"שנה את סדר הקבצים"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded",children:[e.jsx("div",{className:"font-medium text-purple-800 mb-1",children:"3. אחד"}),e.jsx("div",{className:"text-purple-700",children:'לחץ על "אחד קבצים"'})]}),e.jsxs("div",{className:"p-3 bg-orange-50 rounded",children:[e.jsx("div",{className:"font-medium text-orange-800 mb-1",children:"4. הורד"}),e.jsx("div",{className:"text-orange-700",children:"שמור את הקובץ המאוחד"})]})]})})]})]})})};export{W as default};
